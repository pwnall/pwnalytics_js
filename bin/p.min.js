var Pwnalytics=Pwnalytics||{};Pwnalytics.api=function(a){switch(typeof a){case"string":Pwnalytics.post(a,{});break;case"object":if(typeof a.length==="number"&&typeof a[0]==="string"){Pwnalytics.post(a[0],a[1])}else{Pwnalytics.ammendSession(a)}break;case"function":a.call();break}};Pwnalytics.apiProxy={push:Pwnalytics.api,length:0};Pwnalytics.onLoad=function(){this.initSession();this.apiProxy.reset=Pwnalytics.resetSession;var b=window._paq;window._paq=Pwnalytics.apiProxy;for(var a=0;a<b.length;a+=1){this.api(b[a])}};Pwnalytics.readHistory=function(){this.session.url=Pwnalytics.normalizeUrl(document.location);this.session.ref=Pwnalytics.normalizeUrl(document.referrer)};Pwnalytics.normalizeUrl=function(a){a=a.toString();var b=a.indexOf("?");if(b===-1){return a}else{return a.substr(0,b+1)}};Pwnalytics.postUrl="bin/p.gif";Pwnalytics.post=function(a,b){this.session.time=(new Date()).getTime();this.session.px=this.screenInfoString();this.changePendingEvents(1);this.image(this.eventUrl(this.session,a,b))};Pwnalytics.eventUrl=function(g,c,e){var a=[this.postUrl+"?__="+c];var d=window.encodeURIComponent||window.escape;for(var f in g){if(typeof f==="string"&&f.substring(0,2)!=="__"){a.push("__"+f+"="+d(g[f]))}}for(var b in e){if(typeof b==="string"&&b.substring(0,2)!=="__"){a.push(b+"="+d(e[b]))}}return a.join("&")};Pwnalytics.image=function(c){var b=new Image();b.src=c;b.onload=Pwnalytics.onImageLoad;var a=function(){setTimeout(function(){Pwnalytics.image(c)},60000)};b.onerror=a;b.onabort=a};Pwnalytics.onImageLoad=function(a){Pwnalytics.changePendingEvents(-1)};Pwnalytics.changePendingEvents=function(a){this.pendingEvents+=a;this.apiProxy.length=this.pendingEvents};Pwnalytics.pendingEvents=0;Pwnalytics.screenInfoString=function(){var a=window.screen||{};return[(a.availWidth||0).toString(36),(a.availHeight||0).toString(36),(a.colorDepth||0).toString(36),(document.width||0).toString(36),(document.height||0).toString(36),(window.screenLeft||window.screenX||0).toString(36),(window.screenTop||window.screenY||0).toString(36)].join(".")};Pwnalytics.session={};Pwnalytics.dropSession=function(){this.dropUid();this.session={pid:Pwnalytics.session.pid}};Pwnalytics.initSession=function(){this.session.uid=Pwnalytics.uid();this.readHistory()};Pwnalytics.resetSession=function(){Pwnalytics.dropSession();Pwnalytics.initSession()};Pwnalytics.ammendSession=function(b){for(var a in b){if(typeof a!=="string"||a.substring(0,2)!=="__"){this.session[a]=b[a]}}};Pwnalytics.onUnload=function(){Pwnalytics.post("unload",{})};if(window.addEventListener){window.addEventListener("unload",Pwnalytics.onUnload,false)}else{if(window.attachEvent){window.attachEvent("unload",Pwnalytics.onUnload)}}Pwnalytics.useLocalStorage=!!window.localStorage;Pwnalytics.dropUid=function(){if(this.useLocalStorage){window.localStorage.removeItem("__pwnu")}else{document.cookie="__pwnu=;expires=Thu, 01-Jan-1970 00:00:01 GMT"}this.cachedUid=null};Pwnalytics.randomUid=function(){var c=(new Date()).getTime().toString(36);var b=Math.floor(Math.random()*2147483647).toString(36);var a=Math.floor(Math.random()*2147483647).toString(36);return[c,".",b,".",a].join("")};Pwnalytics.uid=function(){if(this.cachedUid){return this.cachedUid}if(!(this.cachedUid=this.readUid())){this.cachedUid=this.randomUid();this.stashUid(this.cachedUid)}return this.cachedUid};Pwnalytics.readUid=function(){if(this.useLocalStorage){return window.localStorage.getItem("__pwnu")}else{var a=/(^|\W)__pwnu=([^;]*)(;|$)/.exec(document.cookie);return a&&a[2]}};Pwnalytics.stashUid=function(a){if(this.useLocalStorage){window.localStorage.setItem("__pwnu",a)}else{document.cookie="__pwnu="+a+"; expires=Tue, 19-Jan-2038 03:14:07 GMT"}};Pwnalytics.onLoad();